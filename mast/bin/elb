#!/usr/bin/perl

$| = 1;
use v5.030;
use warnings;

use Getopt::Long;
use Mast::Deploy::Step;

# Get next arg which is the "step" or the "command"
# How to dynamically get the rest of the options 

# Get remaining options

# get the appropriate step

# call the step with the options

my (@contexts, $cloud_spec_json);

GetOptions(
  'context=s' => \@contexts,
  'cloud-spec-json=s' => \$cloud_spec_json,
)
  or die "Error in command line arguments\n";

$contexts //= [];
say "Contexts: $contexts";
say "Cloud spec: $cloud_spec_json";

update_elb_listeners(
  contexts => $contexts,
  cloud_spec_json => $cloud_spec_json
);

say "Successfully updated listener.";
